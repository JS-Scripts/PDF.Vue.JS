<!DOCTYPE html>
<html>
<body>
    <style>html, body {margin: 0; padding: 0;}</style>
    <div id="vue">
        <vue-pdf-app style="height: 100vh;" :pdf="pdf" :config="config"></vue-pdf-app>
    </div>
<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/vue-pdf-app"></script>
<script>
    function pdf_url() {
        var pdf_url = window.location.href;
        var pdf_url_tmp = new URL(url_string);
        var base64_tmp = pdf_url_tmp.searchParams.get("base64");
        return console.log(base64_url_encode(base64_tmp))
    }
    
    function base64_url_encode(input) {
        var input = input.replaceAll("+", ".").replaceAll("/", "_").replaceAll("=", "-");
        return input
    }

    function base64_url_decode(input) {
        var input = input.replaceAll(".", "+").replaceAll("_", "/").replaceAll("-", "=");
        return input
    }
    
    Vue.component('vue-pdf-app', window["vue-pdf-app"]);
    //Vue.use(window["vue-pdf-app"]); 
    
    app = new Vue({
        el: '#vue',
        delimiters: ['[[', ']]'],
        data: {
            config: {
                toolbar: {
                toolbarViewerLeft: { findbar: false }
                }
            },
            pdf: getPdf()
        },
        methods: {
        },
    })
    function getPdf() {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var base64_string = url.searchParams.get("base64");
        const pdf = base64_string;

        return base64ToArrayBuffer(pdf);
    }

    function base64ToArrayBuffer(base64) {
        var binary_string = window.atob(base64_url_decode(base64));
        var len = binary_string.length;
        var bytes = new Uint8Array(len);
        for (var i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes.buffer;
    }
   </script>
</body>
</html>
